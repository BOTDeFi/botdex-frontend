{"ast":null,"code":"var _jsxFileName = \"/Users/rocknblock/Documents/GitHub/strong-hands-frontend/src/components/sections/Trade/AddLiquidity/index.tsx\",\n    _s = $RefreshSig$();\n\nimport React from 'react';\nimport BigNumber from 'bignumber.js/bignumber';\nimport { observer } from 'mobx-react-lite';\nimport { clog, clogError } from '@/utils/logger';\nimport { tokens } from '@/config';\nimport { useWalletConnectorContext } from '../../../../services/MetamaskConnect';\nimport MetamaskService from '../../../../services/web3';\nimport { useMst } from '../../../../store';\nimport { Button, Popover } from '../../../atoms';\nimport { ChooseTokens, TradeBox } from '..';\nimport './AddLiquidity.scss';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst AddLiquidity = observer(_c = _s(({\n  tokensData,\n  setTokensData,\n  setAllowanceFrom,\n  setAllowanceTo,\n  isAllowanceFrom,\n  handleApproveTokens,\n  isAllowanceTo,\n  settings,\n  tokensResurves,\n  isLoadingExchange,\n  isApproving\n}) => {\n  _s();\n\n  const {\n    metamaskService,\n    connect\n  } = useWalletConnectorContext();\n  const {\n    user\n  } = useMst();\n  const [exchange, setExchange] = React.useState(undefined);\n  const [isLoading, setLoading] = React.useState(false);\n\n  const handleCreatePair = async () => {\n    clog(settings, 'txDeadlineUtc');\n\n    try {\n      if (tokensData.from.token && tokensData.to.token) {\n        var _tokensData$from$toke, _tokensData$to$token;\n\n        setLoading(true);\n        let data = [(_tokensData$from$toke = tokensData.from.token) === null || _tokensData$from$toke === void 0 ? void 0 : _tokensData$from$toke.address, (_tokensData$to$token = tokensData.to.token) === null || _tokensData$to$token === void 0 ? void 0 : _tokensData$to$token.address, MetamaskService.calcTransactionAmount(tokensData.from.amount, +tokensData.from.token.decimals), MetamaskService.calcTransactionAmount(tokensData.to.amount, +tokensData.to.token.decimals), MetamaskService.calcTransactionAmount(tokensData.from.amount, +tokensData.from.token.decimals), MetamaskService.calcTransactionAmount(tokensData.to.amount, +tokensData.to.token.decimals), user.address, settings.txDeadlineUtc];\n        let method = 'addLiquidity';\n        let value = '';\n        const isFromBnb = tokensData.from.token.symbol.toLowerCase() === 'bnb';\n        const isToBnb = tokensData.to.token.symbol.toLowerCase() === 'bnb';\n\n        if (isFromBnb || isToBnb) {\n          const bnbToken = isFromBnb ? tokensData.from : tokensData.to;\n          const bepToken = !isFromBnb ? tokensData.from : tokensData.to;\n          method = 'addLiquidityETH';\n\n          if (bepToken.token && bnbToken.token) {\n            var _bepToken$token;\n\n            data = [(_bepToken$token = bepToken.token) === null || _bepToken$token === void 0 ? void 0 : _bepToken$token.address, MetamaskService.calcTransactionAmount(bepToken.amount, +bepToken.token.decimals), MetamaskService.calcTransactionAmount(bepToken.amount, +bepToken.token.decimals), MetamaskService.calcTransactionAmount(bnbToken.amount, +bnbToken.token.decimals), user.address, settings.txDeadlineUtc];\n            value = MetamaskService.calcTransactionAmount(bnbToken.amount, +bnbToken.token.decimals);\n          }\n        }\n\n        debugger;\n        await metamaskService.createTransaction({\n          contractName: 'ROUTER',\n          method,\n          data,\n          value\n        });\n        setLoading(false);\n        delete localStorage['refinery-finance-quote'];\n        setTokensData({\n          from: {\n            token: undefined,\n            amount: NaN\n          },\n          to: {\n            token: undefined,\n            amount: NaN\n          }\n        });\n      }\n    } catch (err) {\n      setLoading(false);\n      clogError(err);\n    }\n  };\n\n  React.useEffect(() => {\n    if (tokensData.from.amount && tokensData.to.amount && tokensResurves && tokensData.from.token && tokensData.to.token) {\n      try {\n        const token1 = new BigNumber(MetamaskService.calcTransactionAmount(tokensData.from.amount, +tokensData.from.token.decimals)).toString(10);\n        const token2 = new BigNumber(MetamaskService.calcTransactionAmount(tokensData.to.amount, +tokensData.to.token.decimals)).toString(10);\n        const share1 = new BigNumber(token1).dividedBy(new BigNumber(tokensResurves['0']).plus(tokensResurves['1']).plus(token1)).toString(10);\n        const share2 = new BigNumber(token2).dividedBy(new BigNumber(tokensResurves['0']).plus(tokensResurves['1']).plus(token2)).toString(10);\n        const min = BigNumber.min(share1, share2).toString(10);\n        setExchange(ex => ({ ...ex,\n          share: +min\n        }));\n        const isFromBnb = tokensData.from.token.symbol.toLowerCase() === 'bnb';\n        const isToBnb = tokensData.to.token.symbol.toLowerCase() === 'bnb';\n        metamaskService.callContractMethod('ROUTER', 'getAmountsOut', [MetamaskService.calcTransactionAmount(tokensData.from.amount, +tokensData.from.token.decimals), [isToBnb ? tokens.wbnb.address[97] : tokensData.to.token.address, isFromBnb ? tokens.wbnb.address[97] : tokensData.from.token.address]]).then(res => {\n          if (tokensData.from.token) {\n            var _tokensData$from$toke2;\n\n            const amount = +MetamaskService.amountFromGwei(res[1], +((_tokensData$from$toke2 = tokensData.from.token) === null || _tokensData$from$toke2 === void 0 ? void 0 : _tokensData$from$toke2.decimals));\n            setExchange(data => ({ ...data,\n              first: amount\n            }));\n          }\n        });\n        metamaskService.callContractMethod('ROUTER', 'getAmountsOut', [MetamaskService.calcTransactionAmount(tokensData.to.amount, +tokensData.to.token.decimals), [isFromBnb ? tokens.wbnb.address[97] : tokensData.from.token.address, isToBnb ? tokens.wbnb.address[97] : tokensData.to.token.address]]).then(res => {\n          if (tokensData.to.token) {\n            var _tokensData$to$token2;\n\n            const amount = +MetamaskService.amountFromGwei(res[1], +((_tokensData$to$token2 = tokensData.to.token) === null || _tokensData$to$token2 === void 0 ? void 0 : _tokensData$to$token2.decimals));\n            setExchange(data => ({ ...data,\n              second: amount\n            }));\n          }\n        });\n      } catch (err) {\n        clogError(err);\n      }\n    } else {\n      setExchange(undefined);\n    }\n  }, [tokensData.from.token, tokensData.to.token, tokensData.from.amount, tokensData.to.amount, tokensResurves, metamaskService]);\n  return /*#__PURE__*/_jsxDEV(TradeBox, {\n    className: \"add-liquidity\",\n    title: \"Add Liquidity\",\n    subtitle: \"Add liquidity to receive LP tokens\",\n    settingsLink: \"/trade/liquidity/settings\",\n    recentTxLink: \"/trade/liquidity/history\",\n    info: \"Liquidity providers earn a 0.17% trading fee on all trades made for that token pair, proportional to their share of the liquidity pool.\",\n    titleBackLink: true,\n    children: [exchange === null || tokensResurves === null ? /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"add-liquidity__first text-smd\",\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-bold\",\n        children: \"You are the first liquidity provider.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 247,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"The ratio of tokens you add will set the price of this pool.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 248,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 246,\n      columnNumber: 11\n    }, this) : '', /*#__PURE__*/_jsxDEV(ChooseTokens, {\n      handleChangeTokens: setTokensData,\n      initialTokenData: tokensData,\n      textFrom: \"Input\",\n      textTo: \"Input\",\n      changeTokenFromAllowance: value => setAllowanceFrom(value),\n      changeTokenToAllowance: value => setAllowanceTo(value)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 253,\n      columnNumber: 9\n    }, this), tokensData.from.token && tokensData.to.token && exchange && (exchange.first || exchange.first === 0) && (exchange.second || exchange.second === 0) && (exchange.share || exchange.share === 0) ? /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"add-liquidity__info\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"add-liquidity__info-title text-smd text-yellow\",\n        children: \"Prices and pool share\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 268,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"add-liquidity__info-content text-med\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"add-liquidity__info-item\",\n          children: [/*#__PURE__*/_jsxDEV(Popover, {\n            content: /*#__PURE__*/_jsxDEV(\"span\", {\n              children: new BigNumber(exchange.first).toString(10)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 273,\n              columnNumber: 35\n            }, this),\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text text-center text-yellow add-liquidity__info-item-title\",\n              children: new BigNumber(exchange.first).toFixed(4).toString()\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 274,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 273,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-sm text-center text-gray text-center text-yellow\",\n            children: [tokensData.from.token.symbol, /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 280,\n              columnNumber: 19\n            }, this), \" per \", tokensData.to.token.symbol]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 278,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 272,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"add-liquidity__info-item\",\n          children: [/*#__PURE__*/_jsxDEV(Popover, {\n            content: /*#__PURE__*/_jsxDEV(\"span\", {\n              children: new BigNumber(exchange.second).toString(10)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 284,\n              columnNumber: 35\n            }, this),\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text text-center text-yellow add-liquidity__info-item-title\",\n              children: new BigNumber(exchange.second).toFixed(4).toString()\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 285,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 284,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-sm text-center text-gray text-center text-yellow\",\n            children: [tokensData.to.token.symbol, /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 291,\n              columnNumber: 19\n            }, this), \" per \", tokensData.from.token.symbol]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 289,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 283,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"add-liquidity__info-item\",\n          children: [/*#__PURE__*/_jsxDEV(Popover, {\n            content: /*#__PURE__*/_jsxDEV(\"span\", {\n              children: new BigNumber(exchange.share).toString(10)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 295,\n              columnNumber: 35\n            }, this),\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text text-center text-yellow add-liquidity__info-item-title\",\n              children: [exchange.share < 0.01 ? '<0.01' : new BigNumber(exchange.share).toFixed(4).toString(), \"%\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 296,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 295,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-sm text-center text-gray text-center text-yellow\",\n            children: [\"Share\", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 305,\n              columnNumber: 19\n            }, this), \" of Pool\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 303,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 294,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 271,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 267,\n      columnNumber: 11\n    }, this) : '', !user.address ? /*#__PURE__*/_jsxDEV(Button, {\n      className: \"exchange__btn\",\n      onClick: connect,\n      children: /*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"text-bold text-md text-white\",\n        children: \"Connect\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 315,\n        columnNumber: 13\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 314,\n      columnNumber: 11\n    }, this) : '', user.address && isAllowanceFrom && isAllowanceTo && tokensData.from.token && tokensData.to.token && tokensData.to.amount && tokensData.from.amount ? /*#__PURE__*/_jsxDEV(Button, {\n      className: \"add-liquidity__btn\",\n      disabled: !tokensData.from.amount || !tokensData.to.amount,\n      onClick: handleCreatePair,\n      loading: isLoading || isLoadingExchange,\n      loadingText: isLoadingExchange ? 'Geting exchange' : '',\n      children: /*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"text-white text-bold text-smd\",\n        children: \"Add\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 334,\n        columnNumber: 13\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 327,\n      columnNumber: 11\n    }, this) : '', user.address && tokensData.from.token && tokensData.to.token && (!tokensData.to.amount || !tokensData.from.amount) ? /*#__PURE__*/_jsxDEV(Button, {\n      className: \"add-liquidity__btn\",\n      disabled: !tokensData.from.amount || !tokensData.to.amount,\n      loading: isLoadingExchange,\n      loadingText: \"Geting exchange\",\n      children: /*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"text-white text-bold text-smd\",\n        children: \"Enter an amount\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 349,\n        columnNumber: 13\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 343,\n      columnNumber: 11\n    }, this) : '', user.address && (!isAllowanceFrom || !isAllowanceTo) && tokensData.from.token && tokensData.to.token && tokensData.to.amount && tokensData.from.amount ? /*#__PURE__*/_jsxDEV(Button, {\n      className: \"add-liquidity__btn\",\n      onClick: handleApproveTokens,\n      loading: isApproving,\n      children: /*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"text-white text-bold text-smd\",\n        children: \"Approve tokens\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 365,\n        columnNumber: 13\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 360,\n      columnNumber: 11\n    }, this) : '', user.address && (!tokensData.from.token || !tokensData.to.token) ? /*#__PURE__*/_jsxDEV(Button, {\n      disabled: true,\n      className: \"add-liquidity__btn\",\n      children: /*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"text-white text-bold text-smd\",\n        children: \"Select a Tokens\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 372,\n        columnNumber: 13\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 371,\n      columnNumber: 11\n    }, this) : '']\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 236,\n    columnNumber: 7\n  }, this);\n}, \"SLfXCd8cfRsEE2Um45Norcb6Yfk=\", false, function () {\n  return [useWalletConnectorContext, useMst];\n}));\n_c2 = AddLiquidity;\nexport default AddLiquidity;\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"AddLiquidity$observer\");\n$RefreshReg$(_c2, \"AddLiquidity\");","map":{"version":3,"sources":["/Users/rocknblock/Documents/GitHub/strong-hands-frontend/src/components/sections/Trade/AddLiquidity/index.tsx"],"names":["React","BigNumber","observer","clog","clogError","tokens","useWalletConnectorContext","MetamaskService","useMst","Button","Popover","ChooseTokens","TradeBox","AddLiquidity","tokensData","setTokensData","setAllowanceFrom","setAllowanceTo","isAllowanceFrom","handleApproveTokens","isAllowanceTo","settings","tokensResurves","isLoadingExchange","isApproving","metamaskService","connect","user","exchange","setExchange","useState","undefined","isLoading","setLoading","handleCreatePair","from","token","to","data","address","calcTransactionAmount","amount","decimals","txDeadlineUtc","method","value","isFromBnb","symbol","toLowerCase","isToBnb","bnbToken","bepToken","createTransaction","contractName","localStorage","NaN","err","useEffect","token1","toString","token2","share1","dividedBy","plus","share2","min","ex","share","callContractMethod","wbnb","then","res","amountFromGwei","first","second","toFixed"],"mappings":"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","sourcesContent":["import React from 'react';\nimport BigNumber from 'bignumber.js/bignumber';\nimport { observer } from 'mobx-react-lite';\n\nimport { clog, clogError } from '@/utils/logger';\nimport { tokens } from '@/config';\n\nimport { useWalletConnectorContext } from '../../../../services/MetamaskConnect';\nimport MetamaskService from '../../../../services/web3';\nimport { useMst } from '../../../../store';\nimport { ISettings, ITokens } from '../../../../types';\nimport { Button, Popover } from '../../../atoms';\nimport { ChooseTokens, TradeBox } from '..';\n\nimport './AddLiquidity.scss';\n\ninterface IAddLiquidity {\n  tokensData: ITokens;\n  setTokensData: (value: ITokens) => void;\n  isLoadingExchange: boolean;\n  setAllowanceFrom: (value: boolean) => void;\n  setAllowanceTo: (value: boolean) => void;\n  isAllowanceFrom: boolean;\n  isAllowanceTo: boolean;\n  handleApproveTokens: () => void;\n  settings: ISettings;\n  tokensResurves: any;\n  isApproving: boolean;\n}\n\ninterface IPrices {\n  first?: number;\n  second?: number;\n  share?: number;\n}\n\nconst AddLiquidity: React.FC<IAddLiquidity> = observer(\n  ({\n    tokensData,\n    setTokensData,\n    setAllowanceFrom,\n    setAllowanceTo,\n    isAllowanceFrom,\n    handleApproveTokens,\n    isAllowanceTo,\n    settings,\n    tokensResurves,\n    isLoadingExchange,\n    isApproving,\n  }) => {\n    const { metamaskService, connect } = useWalletConnectorContext();\n    const { user } = useMst();\n\n    const [exchange, setExchange] = React.useState<IPrices | undefined | null>(undefined);\n    const [isLoading, setLoading] = React.useState<boolean>(false);\n\n    const handleCreatePair = async () => {\n      clog(settings, 'txDeadlineUtc');\n      try {\n        if (tokensData.from.token && tokensData.to.token) {\n          setLoading(true);\n          let data: any[] = [\n            tokensData.from.token?.address,\n            tokensData.to.token?.address,\n            MetamaskService.calcTransactionAmount(\n              tokensData.from.amount,\n              +tokensData.from.token.decimals,\n            ),\n            MetamaskService.calcTransactionAmount(\n              tokensData.to.amount,\n              +tokensData.to.token.decimals,\n            ),\n            MetamaskService.calcTransactionAmount(\n              tokensData.from.amount,\n              +tokensData.from.token.decimals,\n            ),\n            MetamaskService.calcTransactionAmount(\n              tokensData.to.amount,\n              +tokensData.to.token.decimals,\n            ),\n            user.address,\n            settings.txDeadlineUtc,\n          ];\n          let method = 'addLiquidity';\n          let value = '';\n\n          const isFromBnb = tokensData.from.token.symbol.toLowerCase() === 'bnb';\n          const isToBnb = tokensData.to.token.symbol.toLowerCase() === 'bnb';\n\n          if (isFromBnb || isToBnb) {\n            const bnbToken = isFromBnb ? tokensData.from : tokensData.to;\n            const bepToken = !isFromBnb ? tokensData.from : tokensData.to;\n            method = 'addLiquidityETH';\n\n            if (bepToken.token && bnbToken.token) {\n              data = [\n                bepToken.token?.address,\n                MetamaskService.calcTransactionAmount(bepToken.amount, +bepToken.token.decimals),\n                MetamaskService.calcTransactionAmount(bepToken.amount, +bepToken.token.decimals),\n                MetamaskService.calcTransactionAmount(bnbToken.amount, +bnbToken.token.decimals),\n                user.address,\n                settings.txDeadlineUtc,\n              ];\n              value = MetamaskService.calcTransactionAmount(\n                bnbToken.amount,\n                +bnbToken.token.decimals,\n              );\n            }\n          }\n\n          debugger;\n\n          await metamaskService.createTransaction({\n            contractName: 'ROUTER',\n            method,\n            data,\n            value,\n          });\n          setLoading(false);\n          delete localStorage['refinery-finance-quote'];\n          setTokensData({\n            from: {\n              token: undefined,\n              amount: NaN,\n            },\n            to: {\n              token: undefined,\n              amount: NaN,\n            },\n          });\n        }\n      } catch (err) {\n        setLoading(false);\n        clogError(err);\n      }\n    };\n\n    React.useEffect(() => {\n      if (\n        tokensData.from.amount &&\n        tokensData.to.amount &&\n        tokensResurves &&\n        tokensData.from.token &&\n        tokensData.to.token\n      ) {\n        try {\n          const token1 = new BigNumber(\n            MetamaskService.calcTransactionAmount(\n              tokensData.from.amount,\n              +tokensData.from.token.decimals,\n            ),\n          ).toString(10);\n          const token2 = new BigNumber(\n            MetamaskService.calcTransactionAmount(\n              tokensData.to.amount,\n              +tokensData.to.token.decimals,\n            ),\n          ).toString(10);\n          const share1 = new BigNumber(token1)\n            .dividedBy(new BigNumber(tokensResurves['0']).plus(tokensResurves['1']).plus(token1))\n            .toString(10);\n          const share2 = new BigNumber(token2)\n            .dividedBy(new BigNumber(tokensResurves['0']).plus(tokensResurves['1']).plus(token2))\n            .toString(10);\n          const min = BigNumber.min(share1, share2).toString(10);\n\n          setExchange((ex) => ({\n            ...ex,\n            share: +min,\n          }));\n          const isFromBnb = tokensData.from.token.symbol.toLowerCase() === 'bnb';\n          const isToBnb = tokensData.to.token.symbol.toLowerCase() === 'bnb';\n\n          metamaskService\n            .callContractMethod('ROUTER', 'getAmountsOut', [\n              MetamaskService.calcTransactionAmount(\n                tokensData.from.amount,\n                +tokensData.from.token.decimals,\n              ),\n              [\n                isToBnb ? tokens.wbnb.address[97] : tokensData.to.token.address,\n                isFromBnb ? tokens.wbnb.address[97] : tokensData.from.token.address,\n              ],\n            ])\n            .then((res) => {\n              if (tokensData.from.token) {\n                const amount = +MetamaskService.amountFromGwei(\n                  res[1],\n                  +tokensData.from.token?.decimals,\n                );\n                setExchange((data) => ({\n                  ...data,\n                  first: amount,\n                }));\n              }\n            });\n          metamaskService\n            .callContractMethod('ROUTER', 'getAmountsOut', [\n              MetamaskService.calcTransactionAmount(\n                tokensData.to.amount,\n                +tokensData.to.token.decimals,\n              ),\n              [\n                isFromBnb ? tokens.wbnb.address[97] : tokensData.from.token.address,\n                isToBnb ? tokens.wbnb.address[97] : tokensData.to.token.address,\n              ],\n            ])\n            .then((res) => {\n              if (tokensData.to.token) {\n                const amount = +MetamaskService.amountFromGwei(\n                  res[1],\n                  +tokensData.to.token?.decimals,\n                );\n                setExchange((data) => ({\n                  ...data,\n                  second: amount,\n                }));\n              }\n            });\n        } catch (err) {\n          clogError(err);\n        }\n      } else {\n        setExchange(undefined);\n      }\n    }, [\n      tokensData.from.token,\n      tokensData.to.token,\n      tokensData.from.amount,\n      tokensData.to.amount,\n      tokensResurves,\n      metamaskService,\n    ]);\n\n    return (\n      <TradeBox\n        className=\"add-liquidity\"\n        title=\"Add Liquidity\"\n        subtitle=\"Add liquidity to receive LP tokens\"\n        settingsLink=\"/trade/liquidity/settings\"\n        recentTxLink=\"/trade/liquidity/history\"\n        info=\"Liquidity providers earn a 0.17% trading fee on all trades made for that token pair, proportional to their share of the liquidity pool.\"\n        titleBackLink\n      >\n        {exchange === null || tokensResurves === null ? (\n          <div className=\"add-liquidity__first text-smd\">\n            <p className=\"text-bold\">You are the first liquidity provider.</p>\n            <p>The ratio of tokens you add will set the price of this pool.</p>\n          </div>\n        ) : (\n          ''\n        )}\n        <ChooseTokens\n          handleChangeTokens={setTokensData}\n          initialTokenData={tokensData}\n          textFrom=\"Input\"\n          textTo=\"Input\"\n          changeTokenFromAllowance={(value: boolean) => setAllowanceFrom(value)}\n          changeTokenToAllowance={(value: boolean) => setAllowanceTo(value)}\n        />\n        {tokensData.from.token &&\n        tokensData.to.token &&\n        exchange &&\n        (exchange.first || exchange.first === 0) &&\n        (exchange.second || exchange.second === 0) &&\n        (exchange.share || exchange.share === 0) ? (\n          <div className=\"add-liquidity__info\">\n            <div className=\"add-liquidity__info-title text-smd text-yellow\">\n              Prices and pool share\n            </div>\n            <div className=\"add-liquidity__info-content text-med\">\n              <div className=\"add-liquidity__info-item\">\n                <Popover content={<span>{new BigNumber(exchange.first).toString(10)}</span>}>\n                  <div className=\"text text-center text-yellow add-liquidity__info-item-title\">\n                    {new BigNumber(exchange.first).toFixed(4).toString()}\n                  </div>\n                </Popover>\n                <div className=\"text-sm text-center text-gray text-center text-yellow\">\n                  {tokensData.from.token.symbol}\n                  <br /> per {tokensData.to.token.symbol}\n                </div>\n              </div>\n              <div className=\"add-liquidity__info-item\">\n                <Popover content={<span>{new BigNumber(exchange.second).toString(10)}</span>}>\n                  <div className=\"text text-center text-yellow add-liquidity__info-item-title\">\n                    {new BigNumber(exchange.second).toFixed(4).toString()}\n                  </div>\n                </Popover>\n                <div className=\"text-sm text-center text-gray text-center text-yellow\">\n                  {tokensData.to.token.symbol}\n                  <br /> per {tokensData.from.token.symbol}\n                </div>\n              </div>\n              <div className=\"add-liquidity__info-item\">\n                <Popover content={<span>{new BigNumber(exchange.share).toString(10)}</span>}>\n                  <div className=\"text text-center text-yellow add-liquidity__info-item-title\">\n                    {exchange.share < 0.01\n                      ? '<0.01'\n                      : new BigNumber(exchange.share).toFixed(4).toString()}\n                    %\n                  </div>\n                </Popover>\n                <div className=\"text-sm text-center text-gray text-center text-yellow\">\n                  Share\n                  <br /> of Pool\n                </div>\n              </div>\n            </div>\n          </div>\n        ) : (\n          ''\n        )}\n        {!user.address ? (\n          <Button className=\"exchange__btn\" onClick={connect}>\n            <span className=\"text-bold text-md text-white\">Connect</span>\n          </Button>\n        ) : (\n          ''\n        )}\n        {user.address &&\n        isAllowanceFrom &&\n        isAllowanceTo &&\n        tokensData.from.token &&\n        tokensData.to.token &&\n        tokensData.to.amount &&\n        tokensData.from.amount ? (\n          <Button\n            className=\"add-liquidity__btn\"\n            disabled={!tokensData.from.amount || !tokensData.to.amount}\n            onClick={handleCreatePair}\n            loading={isLoading || isLoadingExchange}\n            loadingText={isLoadingExchange ? 'Geting exchange' : ''}\n          >\n            <span className=\"text-white text-bold text-smd\">Add</span>\n          </Button>\n        ) : (\n          ''\n        )}\n        {user.address &&\n        tokensData.from.token &&\n        tokensData.to.token &&\n        (!tokensData.to.amount || !tokensData.from.amount) ? (\n          <Button\n            className=\"add-liquidity__btn\"\n            disabled={!tokensData.from.amount || !tokensData.to.amount}\n            loading={isLoadingExchange}\n            loadingText=\"Geting exchange\"\n          >\n            <span className=\"text-white text-bold text-smd\">Enter an amount</span>\n          </Button>\n        ) : (\n          ''\n        )}\n        {user.address &&\n        (!isAllowanceFrom || !isAllowanceTo) &&\n        tokensData.from.token &&\n        tokensData.to.token &&\n        tokensData.to.amount &&\n        tokensData.from.amount ? (\n          <Button\n            className=\"add-liquidity__btn\"\n            onClick={handleApproveTokens}\n            loading={isApproving}\n          >\n            <span className=\"text-white text-bold text-smd\">Approve tokens</span>\n          </Button>\n        ) : (\n          ''\n        )}\n        {user.address && (!tokensData.from.token || !tokensData.to.token) ? (\n          <Button disabled className=\"add-liquidity__btn\">\n            <span className=\"text-white text-bold text-smd\">Select a Tokens</span>\n          </Button>\n        ) : (\n          ''\n        )}\n      </TradeBox>\n    );\n  },\n);\n\nexport default AddLiquidity;\n"]},"metadata":{},"sourceType":"module"}