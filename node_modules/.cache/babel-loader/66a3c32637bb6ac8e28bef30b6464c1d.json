{"ast":null,"code":"var _jsxFileName = \"/Users/rocknblock/Documents/GitHub/strong-hands-frontend/src/components/sections/Trade/LiquidityInfoModal/index.tsx\",\n    _s = $RefreshSig$();\n\nimport React from 'react';\nimport BigNumber from 'bignumber.js/bignumber';\nimport { observer } from 'mobx-react-lite';\nimport UnknownImg from \"@/assets/img/currency/unknown.svg\";\nimport { Button } from '@/components/atoms';\nimport { Modal } from '@/components/molecules';\nimport { contracts } from '@/config';\nimport { useWalletConnectorContext } from '@/services/MetamaskConnect';\nimport MetamaskService from '@/services/web3';\nimport { useMst } from '@/store';\nimport { clogError } from '@/utils/logger';\nimport './LiquidityInfoModal.scss';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst LiquidityInfoModal = observer(_c = _s(({\n  info,\n  handleCloseModal\n}) => {\n  _s();\n\n  const {\n    metamaskService\n  } = useWalletConnectorContext();\n  const {\n    user\n  } = useMst();\n  const [deposit0, setDeposit0] = React.useState(0);\n  const [deposit1, setDeposit1] = React.useState(0);\n  const [share, setShare] = React.useState(0);\n  const getDeposites = React.useCallback(async () => {\n    try {\n      if ((info === null || info === void 0 ? void 0 : info.address) && user.address) {\n        let lpBalance = await metamaskService.callContractMethodFromNewContract(info === null || info === void 0 ? void 0 : info.address, contracts.PAIR.ABI, 'balanceOf', [user.address]);\n        lpBalance = +lpBalance + 1000;\n        const supply = await metamaskService.callContractMethodFromNewContract(info === null || info === void 0 ? void 0 : info.address, contracts.PAIR.ABI, 'totalSupply');\n        const percent = new BigNumber(lpBalance).dividedBy(new BigNumber(supply));\n        const depos0 = new BigNumber(MetamaskService.calcTransactionAmount(+info.token0.balance, +(info === null || info === void 0 ? void 0 : info.token0.decimals))).multipliedBy(percent).toString(10);\n        const depos1 = new BigNumber(MetamaskService.calcTransactionAmount(+info.token1.balance, +(info === null || info === void 0 ? void 0 : info.token1.decimals))).multipliedBy(percent).toString(10);\n        setDeposit0(depos0);\n        setDeposit1(depos1);\n      }\n    } catch (err) {\n      clogError('get deposites', err);\n    }\n  }, [info === null || info === void 0 ? void 0 : info.address, metamaskService, user.address, info === null || info === void 0 ? void 0 : info.token0.balance, info === null || info === void 0 ? void 0 : info.token1.balance, info === null || info === void 0 ? void 0 : info.token0.decimals, info === null || info === void 0 ? void 0 : info.token1.decimals]);\n  const handleGetShareOfPool = React.useCallback(() => {\n    if (info && deposit0 && deposit1) {\n      const resurve0 = MetamaskService.calcTransactionAmount(+(info === null || info === void 0 ? void 0 : info.token0.balance), +(info === null || info === void 0 ? void 0 : info.token0.decimals));\n      const resurve1 = MetamaskService.calcTransactionAmount(+(info === null || info === void 0 ? void 0 : info.token1.balance), +(info === null || info === void 0 ? void 0 : info.token1.decimals));\n      const share1 = new BigNumber(deposit0).dividedBy(new BigNumber(resurve0).plus(resurve1).plus(deposit0)).toString(10);\n      const share2 = new BigNumber(deposit1).dividedBy(new BigNumber(resurve0).plus(resurve1).plus(deposit1)).toString(10);\n      const min = BigNumber.min(share1, share2).toString(10);\n      setShare(min);\n    }\n  }, [deposit0, deposit1, info]);\n  React.useEffect(() => {\n    getDeposites();\n  }, [getDeposites]);\n  React.useEffect(() => {\n    handleGetShareOfPool();\n  }, [handleGetShareOfPool, deposit0, deposit1, info]);\n  return /*#__PURE__*/_jsxDEV(Modal, {\n    isVisible: !!info,\n    className: \"liquidity-info\",\n    handleCancel: handleCloseModal,\n    width: 390,\n    destroyOnClose: true,\n    closeIcon: true,\n    children: info ? /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"liquidity-info__content\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-black text-smd text-bold\",\n        children: \"Your Liquidity\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"liquidity-info__title box-f-ai-c\",\n        children: [/*#__PURE__*/_jsxDEV(\"img\", {\n          src: UnknownImg,\n          alt: info.token0.symbol\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 122,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n          src: UnknownImg,\n          alt: info.token1.symbol\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 123,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"text-black text-smd\",\n          children: `${info.token0.symbol}/${info.token1.symbol}`\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 124,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"liquidity-info__row box-f-ai-c box-f-jc-sb text-black text-smd\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          children: `${info.token0.symbol} Deposited`\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 127,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"box-f-ai-c\",\n          children: [/*#__PURE__*/_jsxDEV(\"img\", {\n            src: UnknownImg,\n            alt: info.token0.symbol\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 129,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            children: (+MetamaskService.amountFromGwei(deposit0, +info.token0.decimals)).toFixed()\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 130,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 128,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 126,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"liquidity-info__row box-f-ai-c box-f-jc-sb text-black text-smd\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          children: `${info.token1.symbol} Deposited`\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 136,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"box-f-ai-c\",\n          children: [/*#__PURE__*/_jsxDEV(\"img\", {\n            src: UnknownImg,\n            alt: info.token1.symbol\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 138,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            children: (+MetamaskService.amountFromGwei(deposit1, +info.token1.decimals)).toFixed()\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 139,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 137,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 135,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"liquidity-info__row box-f box-f-jc-sb text-black text-smd\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          children: \"Rates\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 145,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-right\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            children: `1 ${info.token0.symbol} = ${+(+info.token1.rate).toFixed(8)} ${info.token1.symbol}`\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 147,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 150,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: `1 ${info.token1.symbol} = ${+(+info.token0.rate).toFixed(8)} ${info.token0.symbol}`\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 151,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 146,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 144,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"liquidity-info__row box-f-ai-c box-f-jc-sb text-black text-smd\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          children: \"Share of Pool\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 157,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          children: [(+share).toFixed(5), \"%\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 158,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 156,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        colorScheme: \"purple\",\n        size: \"smd\",\n        className: \"liquidity-info__btn\",\n        link: {\n          pathname: '/trade/liquidity/remove',\n          state: {\n            address: info.address,\n            token0: { ...info.token0,\n              deposited: deposit0\n            },\n            token1: { ...info.token1,\n              deposited: deposit1\n            }\n          }\n        },\n        children: /*#__PURE__*/_jsxDEV(\"span\", {\n          children: \"Remove\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 179,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 160,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 9\n    }, this) : ''\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 110,\n    columnNumber: 5\n  }, this);\n}, \"KIoYaJUROp/9O+fpBdJAkmR9Luo=\", false, function () {\n  return [useWalletConnectorContext, useMst];\n}));\n_c2 = LiquidityInfoModal;\nexport default LiquidityInfoModal;\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"LiquidityInfoModal$observer\");\n$RefreshReg$(_c2, \"LiquidityInfoModal\");","map":{"version":3,"sources":["/Users/rocknblock/Documents/GitHub/strong-hands-frontend/src/components/sections/Trade/LiquidityInfoModal/index.tsx"],"names":["React","BigNumber","observer","Button","Modal","contracts","useWalletConnectorContext","MetamaskService","useMst","clogError","LiquidityInfoModal","info","handleCloseModal","metamaskService","user","deposit0","setDeposit0","useState","deposit1","setDeposit1","share","setShare","getDeposites","useCallback","address","lpBalance","callContractMethodFromNewContract","PAIR","ABI","supply","percent","dividedBy","depos0","calcTransactionAmount","token0","balance","decimals","multipliedBy","toString","depos1","token1","err","handleGetShareOfPool","resurve0","resurve1","share1","plus","share2","min","useEffect","UnknownImg","symbol","amountFromGwei","toFixed","rate","pathname","state","deposited"],"mappings":"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","sourcesContent":["import React from 'react';\nimport BigNumber from 'bignumber.js/bignumber';\nimport { observer } from 'mobx-react-lite';\n\nimport UnknownImg from '@/assets/img/currency/unknown.svg';\nimport { Button } from '@/components/atoms';\nimport { Modal } from '@/components/molecules';\nimport { contracts } from '@/config';\nimport { useWalletConnectorContext } from '@/services/MetamaskConnect';\nimport MetamaskService from '@/services/web3';\nimport { useMst } from '@/store';\nimport { ILiquidityInfo } from '@/types';\nimport { clogError } from '@/utils/logger';\n\nimport './LiquidityInfoModal.scss';\n\ninterface ILiquidityInfoModal {\n  handleCloseModal: () => void;\n  info?: ILiquidityInfo;\n}\n\nconst LiquidityInfoModal: React.FC<ILiquidityInfoModal> = observer(({ info, handleCloseModal }) => {\n  const { metamaskService } = useWalletConnectorContext();\n  const { user } = useMst();\n\n  const [deposit0, setDeposit0] = React.useState<number | string>(0);\n  const [deposit1, setDeposit1] = React.useState<number | string>(0);\n  const [share, setShare] = React.useState<number | string>(0);\n\n  const getDeposites = React.useCallback(async () => {\n    try {\n      if (info?.address && user.address) {\n        let lpBalance = await metamaskService.callContractMethodFromNewContract(\n          info?.address,\n          contracts.PAIR.ABI,\n          'balanceOf',\n          [user.address],\n        );\n\n        lpBalance = +lpBalance + 1000;\n\n        const supply = await metamaskService.callContractMethodFromNewContract(\n          info?.address,\n          contracts.PAIR.ABI,\n          'totalSupply',\n        );\n\n        const percent = new BigNumber(lpBalance).dividedBy(new BigNumber(supply));\n\n        const depos0 = new BigNumber(\n          MetamaskService.calcTransactionAmount(+info.token0.balance, +info?.token0.decimals),\n        )\n          .multipliedBy(percent)\n          .toString(10);\n        const depos1 = new BigNumber(\n          MetamaskService.calcTransactionAmount(+info.token1.balance, +info?.token1.decimals),\n        )\n          .multipliedBy(percent)\n          .toString(10);\n\n        setDeposit0(depos0);\n        setDeposit1(depos1);\n      }\n    } catch (err) {\n      clogError('get deposites', err);\n    }\n  }, [\n    info?.address,\n    metamaskService,\n    user.address,\n    info?.token0.balance,\n    info?.token1.balance,\n    info?.token0.decimals,\n    info?.token1.decimals,\n  ]);\n\n  const handleGetShareOfPool = React.useCallback(() => {\n    if (info && deposit0 && deposit1) {\n      const resurve0 = MetamaskService.calcTransactionAmount(\n        +info?.token0.balance,\n        +info?.token0.decimals,\n      );\n      const resurve1 = MetamaskService.calcTransactionAmount(\n        +info?.token1.balance,\n        +info?.token1.decimals,\n      );\n\n      const share1 = new BigNumber(deposit0)\n        .dividedBy(new BigNumber(resurve0).plus(resurve1).plus(deposit0))\n        .toString(10);\n      const share2 = new BigNumber(deposit1)\n        .dividedBy(new BigNumber(resurve0).plus(resurve1).plus(deposit1))\n        .toString(10);\n\n      const min = BigNumber.min(share1, share2).toString(10);\n\n      setShare(min);\n    }\n  }, [deposit0, deposit1, info]);\n\n  React.useEffect(() => {\n    getDeposites();\n  }, [getDeposites]);\n\n  React.useEffect(() => {\n    handleGetShareOfPool();\n  }, [handleGetShareOfPool, deposit0, deposit1, info]);\n\n  return (\n    <Modal\n      isVisible={!!info}\n      className=\"liquidity-info\"\n      handleCancel={handleCloseModal}\n      width={390}\n      destroyOnClose\n      closeIcon\n    >\n      {info ? (\n        <div className=\"liquidity-info__content\">\n          <div className=\"text-black text-smd text-bold\">Your Liquidity</div>\n          <div className=\"liquidity-info__title box-f-ai-c\">\n            <img src={UnknownImg} alt={info.token0.symbol} />\n            <img src={UnknownImg} alt={info.token1.symbol} />\n            <span className=\"text-black text-smd\">{`${info.token0.symbol}/${info.token1.symbol}`}</span>\n          </div>\n          <div className=\"liquidity-info__row box-f-ai-c box-f-jc-sb text-black text-smd\">\n            <span>{`${info.token0.symbol} Deposited`}</span>\n            <div className=\"box-f-ai-c\">\n              <img src={UnknownImg} alt={info.token0.symbol} />\n              <span>\n                {(+MetamaskService.amountFromGwei(deposit0, +info.token0.decimals)).toFixed()}\n              </span>\n            </div>\n          </div>\n          <div className=\"liquidity-info__row box-f-ai-c box-f-jc-sb text-black text-smd\">\n            <span>{`${info.token1.symbol} Deposited`}</span>\n            <div className=\"box-f-ai-c\">\n              <img src={UnknownImg} alt={info.token1.symbol} />\n              <span>\n                {(+MetamaskService.amountFromGwei(deposit1, +info.token1.decimals)).toFixed()}\n              </span>\n            </div>\n          </div>\n          <div className=\"liquidity-info__row box-f box-f-jc-sb text-black text-smd\">\n            <span>Rates</span>\n            <div className=\"text-right\">\n              <div>{`1 ${info.token0.symbol} = ${+(+info.token1.rate).toFixed(8)} ${\n                info.token1.symbol\n              }`}</div>\n              <br />\n              <div>{`1 ${info.token1.symbol} = ${+(+info.token0.rate).toFixed(8)} ${\n                info.token0.symbol\n              }`}</div>\n            </div>\n          </div>\n          <div className=\"liquidity-info__row box-f-ai-c box-f-jc-sb text-black text-smd\">\n            <span>Share of Pool</span>\n            <span>{(+share).toFixed(5)}%</span>\n          </div>\n          <Button\n            colorScheme=\"purple\"\n            size=\"smd\"\n            className=\"liquidity-info__btn\"\n            link={{\n              pathname: '/trade/liquidity/remove',\n              state: {\n                address: info.address,\n                token0: {\n                  ...info.token0,\n                  deposited: deposit0,\n                },\n                token1: {\n                  ...info.token1,\n                  deposited: deposit1,\n                },\n              },\n            }}\n          >\n            <span>Remove</span>\n          </Button>\n        </div>\n      ) : (\n        ''\n      )}\n    </Modal>\n  );\n});\n\nexport default LiquidityInfoModal;\n"]},"metadata":{},"sourceType":"module"}