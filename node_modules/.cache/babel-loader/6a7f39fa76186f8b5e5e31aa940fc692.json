{"ast":null,"code":"// Use strict mode (https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Strict_mode)\n\"use strict\"; // Requires\n\nvar Typo = require(\"typo-js\"); // Create function\n\n\nfunction CodeMirrorSpellChecker(options) {\n  // Initialize\n  options = options || {}; // Verify\n\n  if (typeof options.codeMirrorInstance !== \"function\" || typeof options.codeMirrorInstance.defineMode !== \"function\") {\n    console.log(\"CodeMirror Spell Checker: You must provide an instance of CodeMirror via the option `codeMirrorInstance`\");\n    return;\n  } // Because some browsers don't support this functionality yet\n\n\n  if (!String.prototype.includes) {\n    String.prototype.includes = function () {\n      \"use strict\";\n\n      return String.prototype.indexOf.apply(this, arguments) !== -1;\n    };\n  } // Define the new mode\n\n\n  options.codeMirrorInstance.defineMode(\"spell-checker\", function (config) {\n    // Load AFF/DIC data\n    if (!CodeMirrorSpellChecker.aff_loading) {\n      CodeMirrorSpellChecker.aff_loading = true;\n      var xhr_aff = new XMLHttpRequest();\n      xhr_aff.open(\"GET\", \"https://cdn.jsdelivr.net/codemirror.spell-checker/latest/en_US.aff\", true);\n\n      xhr_aff.onload = function () {\n        if (xhr_aff.readyState === 4 && xhr_aff.status === 200) {\n          CodeMirrorSpellChecker.aff_data = xhr_aff.responseText;\n          CodeMirrorSpellChecker.num_loaded++;\n\n          if (CodeMirrorSpellChecker.num_loaded == 2) {\n            CodeMirrorSpellChecker.typo = new Typo(\"en_US\", CodeMirrorSpellChecker.aff_data, CodeMirrorSpellChecker.dic_data, {\n              platform: \"any\"\n            });\n          }\n        }\n      };\n\n      xhr_aff.send(null);\n    }\n\n    if (!CodeMirrorSpellChecker.dic_loading) {\n      CodeMirrorSpellChecker.dic_loading = true;\n      var xhr_dic = new XMLHttpRequest();\n      xhr_dic.open(\"GET\", \"https://cdn.jsdelivr.net/codemirror.spell-checker/latest/en_US.dic\", true);\n\n      xhr_dic.onload = function () {\n        if (xhr_dic.readyState === 4 && xhr_dic.status === 200) {\n          CodeMirrorSpellChecker.dic_data = xhr_dic.responseText;\n          CodeMirrorSpellChecker.num_loaded++;\n\n          if (CodeMirrorSpellChecker.num_loaded == 2) {\n            CodeMirrorSpellChecker.typo = new Typo(\"en_US\", CodeMirrorSpellChecker.aff_data, CodeMirrorSpellChecker.dic_data, {\n              platform: \"any\"\n            });\n          }\n        }\n      };\n\n      xhr_dic.send(null);\n    } // Define what separates a word\n\n\n    var rx_word = \"!\\\"#$%&()*+,-./:;<=>?@[\\\\]^_`{|}~ \"; // Create the overlay and such\n\n    var overlay = {\n      token: function (stream) {\n        var ch = stream.peek();\n        var word = \"\";\n\n        if (rx_word.includes(ch)) {\n          stream.next();\n          return null;\n        }\n\n        while ((ch = stream.peek()) != null && !rx_word.includes(ch)) {\n          word += ch;\n          stream.next();\n        }\n\n        if (CodeMirrorSpellChecker.typo && !CodeMirrorSpellChecker.typo.check(word)) return \"spell-error\"; // CSS class: cm-spell-error\n\n        return null;\n      }\n    };\n    var mode = options.codeMirrorInstance.getMode(config, config.backdrop || \"text/plain\");\n    return options.codeMirrorInstance.overlayMode(mode, overlay, true);\n  });\n} // Initialize data globally to reduce memory consumption\n\n\nCodeMirrorSpellChecker.num_loaded = 0;\nCodeMirrorSpellChecker.aff_loading = false;\nCodeMirrorSpellChecker.dic_loading = false;\nCodeMirrorSpellChecker.aff_data = \"\";\nCodeMirrorSpellChecker.dic_data = \"\";\nCodeMirrorSpellChecker.typo; // Export\n\nmodule.exports = CodeMirrorSpellChecker;","map":{"version":3,"sources":["/Users/rocknblock/Documents/GitHub/strong-hands-frontend/node_modules/codemirror-spell-checker/src/js/spell-checker.js"],"names":["Typo","require","CodeMirrorSpellChecker","options","codeMirrorInstance","defineMode","console","log","String","prototype","includes","indexOf","apply","arguments","config","aff_loading","xhr_aff","XMLHttpRequest","open","onload","readyState","status","aff_data","responseText","num_loaded","typo","dic_data","platform","send","dic_loading","xhr_dic","rx_word","overlay","token","stream","ch","peek","word","next","check","mode","getMode","backdrop","overlayMode","module","exports"],"mappings":"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","sourcesContent":["// Use strict mode (https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Strict_mode)\n\"use strict\";\n\n\n// Requires\nvar Typo = require(\"typo-js\");\n\n\n// Create function\nfunction CodeMirrorSpellChecker(options) {\n\t// Initialize\n\toptions = options || {};\n\n\n\t// Verify\n\tif(typeof options.codeMirrorInstance !== \"function\" || typeof options.codeMirrorInstance.defineMode !== \"function\") {\n\t\tconsole.log(\"CodeMirror Spell Checker: You must provide an instance of CodeMirror via the option `codeMirrorInstance`\");\n\t\treturn;\n\t}\n\n\n\t// Because some browsers don't support this functionality yet\n\tif(!String.prototype.includes) {\n\t\tString.prototype.includes = function() {\n\t\t\t\"use strict\";\n\t\t\treturn String.prototype.indexOf.apply(this, arguments) !== -1;\n\t\t};\n\t}\n\n\n\t// Define the new mode\n\toptions.codeMirrorInstance.defineMode(\"spell-checker\", function(config) {\n\t\t// Load AFF/DIC data\n\t\tif(!CodeMirrorSpellChecker.aff_loading) {\n\t\t\tCodeMirrorSpellChecker.aff_loading = true;\n\t\t\tvar xhr_aff = new XMLHttpRequest();\n\t\t\txhr_aff.open(\"GET\", \"https://cdn.jsdelivr.net/codemirror.spell-checker/latest/en_US.aff\", true);\n\t\t\txhr_aff.onload = function() {\n\t\t\t\tif(xhr_aff.readyState === 4 && xhr_aff.status === 200) {\n\t\t\t\t\tCodeMirrorSpellChecker.aff_data = xhr_aff.responseText;\n\t\t\t\t\tCodeMirrorSpellChecker.num_loaded++;\n\n\t\t\t\t\tif(CodeMirrorSpellChecker.num_loaded == 2) {\n\t\t\t\t\t\tCodeMirrorSpellChecker.typo = new Typo(\"en_US\", CodeMirrorSpellChecker.aff_data, CodeMirrorSpellChecker.dic_data, {\n\t\t\t\t\t\t\tplatform: \"any\"\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t};\n\t\t\txhr_aff.send(null);\n\t\t}\n\n\t\tif(!CodeMirrorSpellChecker.dic_loading) {\n\t\t\tCodeMirrorSpellChecker.dic_loading = true;\n\t\t\tvar xhr_dic = new XMLHttpRequest();\n\t\t\txhr_dic.open(\"GET\", \"https://cdn.jsdelivr.net/codemirror.spell-checker/latest/en_US.dic\", true);\n\t\t\txhr_dic.onload = function() {\n\t\t\t\tif(xhr_dic.readyState === 4 && xhr_dic.status === 200) {\n\t\t\t\t\tCodeMirrorSpellChecker.dic_data = xhr_dic.responseText;\n\t\t\t\t\tCodeMirrorSpellChecker.num_loaded++;\n\n\t\t\t\t\tif(CodeMirrorSpellChecker.num_loaded == 2) {\n\t\t\t\t\t\tCodeMirrorSpellChecker.typo = new Typo(\"en_US\", CodeMirrorSpellChecker.aff_data, CodeMirrorSpellChecker.dic_data, {\n\t\t\t\t\t\t\tplatform: \"any\"\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t};\n\t\t\txhr_dic.send(null);\n\t\t}\n\n\n\t\t// Define what separates a word\n\t\tvar rx_word = \"!\\\"#$%&()*+,-./:;<=>?@[\\\\]^_`{|}~ \";\n\n\n\t\t// Create the overlay and such\n\t\tvar overlay = {\n\t\t\ttoken: function(stream) {\n\t\t\t\tvar ch = stream.peek();\n\t\t\t\tvar word = \"\";\n\n\t\t\t\tif(rx_word.includes(ch)) {\n\t\t\t\t\tstream.next();\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\n\t\t\t\twhile((ch = stream.peek()) != null && !rx_word.includes(ch)) {\n\t\t\t\t\tword += ch;\n\t\t\t\t\tstream.next();\n\t\t\t\t}\n\n\t\t\t\tif(CodeMirrorSpellChecker.typo && !CodeMirrorSpellChecker.typo.check(word))\n\t\t\t\t\treturn \"spell-error\"; // CSS class: cm-spell-error\n\n\t\t\t\treturn null;\n\t\t\t}\n\t\t};\n\n\t\tvar mode = options.codeMirrorInstance.getMode(\n\t\t\tconfig, config.backdrop || \"text/plain\"\n\t\t);\n\n\t\treturn options.codeMirrorInstance.overlayMode(mode, overlay, true);\n\t});\n}\n\n\n// Initialize data globally to reduce memory consumption\nCodeMirrorSpellChecker.num_loaded = 0;\nCodeMirrorSpellChecker.aff_loading = false;\nCodeMirrorSpellChecker.dic_loading = false;\nCodeMirrorSpellChecker.aff_data = \"\";\nCodeMirrorSpellChecker.dic_data = \"\";\nCodeMirrorSpellChecker.typo;\n\n\n// Export\nmodule.exports = CodeMirrorSpellChecker;"]},"metadata":{},"sourceType":"script"}