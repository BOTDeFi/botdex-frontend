{"ast":null,"code":"import { visit } from 'unist-util-visit';\n/**\n * @typedef {import('unist').Node} Node\n * @typedef {import('hast').Root} Root\n * @typedef {import('hast').Element} Element\n *\n * @callback AllowElement\n * @param {Element} element\n * @param {number} index\n * @param {Element|Root} parent\n * @returns {boolean|undefined}\n *\n * @typedef Options\n * @property {Array.<string>} [allowedElements]\n * @property {Array.<string>} [disallowedElements=[]]\n * @property {AllowElement} [allowElement]\n * @property {boolean} [unwrapDisallowed=false]\n */\n\n/**\n * @type {import('unified').Plugin<[Options], Root>}\n */\n\nexport default function rehypeFilter(options) {\n  if (options.allowedElements && options.disallowedElements) {\n    throw new TypeError('Only one of `allowedElements` and `disallowedElements` should be defined');\n  }\n\n  if (options.allowedElements || options.disallowedElements || options.allowElement) {\n    return tree => {\n      visit(tree, 'element', (node, index, parent_) => {\n        const parent =\n        /** @type {Element|Root} */\n        parent_;\n        /** @type {boolean|undefined} */\n\n        let remove;\n\n        if (options.allowedElements) {\n          remove = !options.allowedElements.includes(node.tagName);\n        } else if (options.disallowedElements) {\n          remove = options.disallowedElements.includes(node.tagName);\n        }\n\n        if (!remove && options.allowElement && typeof index === 'number') {\n          remove = !options.allowElement(node, index, parent);\n        }\n\n        if (remove && typeof index === 'number') {\n          if (options.unwrapDisallowed && node.children) {\n            parent.children.splice(index, 1, ...node.children);\n          } else {\n            parent.children.splice(index, 1);\n          }\n\n          return index;\n        }\n\n        return undefined;\n      });\n    };\n  }\n}","map":{"version":3,"sources":["/Users/rocknblock/Documents/GitHub/strong-hands-frontend/node_modules/react-markdown/lib/rehype-filter.js"],"names":["visit","rehypeFilter","options","allowedElements","disallowedElements","TypeError","allowElement","tree","node","index","parent_","parent","remove","includes","tagName","unwrapDisallowed","children","splice","undefined"],"mappings":"AAAA,SAAQA,KAAR,QAAoB,kBAApB;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AACA,eAAe,SAASC,YAAT,CAAsBC,OAAtB,EAA+B;AAC5C,MAAIA,OAAO,CAACC,eAAR,IAA2BD,OAAO,CAACE,kBAAvC,EAA2D;AACzD,UAAM,IAAIC,SAAJ,CACJ,0EADI,CAAN;AAGD;;AAED,MACEH,OAAO,CAACC,eAAR,IACAD,OAAO,CAACE,kBADR,IAEAF,OAAO,CAACI,YAHV,EAIE;AACA,WAAQC,IAAD,IAAU;AACfP,MAAAA,KAAK,CAACO,IAAD,EAAO,SAAP,EAAkB,CAACC,IAAD,EAAOC,KAAP,EAAcC,OAAd,KAA0B;AAC/C,cAAMC,MAAM;AAAG;AAA6BD,QAAAA,OAA5C;AACA;;AACA,YAAIE,MAAJ;;AAEA,YAAIV,OAAO,CAACC,eAAZ,EAA6B;AAC3BS,UAAAA,MAAM,GAAG,CAACV,OAAO,CAACC,eAAR,CAAwBU,QAAxB,CAAiCL,IAAI,CAACM,OAAtC,CAAV;AACD,SAFD,MAEO,IAAIZ,OAAO,CAACE,kBAAZ,EAAgC;AACrCQ,UAAAA,MAAM,GAAGV,OAAO,CAACE,kBAAR,CAA2BS,QAA3B,CAAoCL,IAAI,CAACM,OAAzC,CAAT;AACD;;AAED,YAAI,CAACF,MAAD,IAAWV,OAAO,CAACI,YAAnB,IAAmC,OAAOG,KAAP,KAAiB,QAAxD,EAAkE;AAChEG,UAAAA,MAAM,GAAG,CAACV,OAAO,CAACI,YAAR,CAAqBE,IAArB,EAA2BC,KAA3B,EAAkCE,MAAlC,CAAV;AACD;;AAED,YAAIC,MAAM,IAAI,OAAOH,KAAP,KAAiB,QAA/B,EAAyC;AACvC,cAAIP,OAAO,CAACa,gBAAR,IAA4BP,IAAI,CAACQ,QAArC,EAA+C;AAC7CL,YAAAA,MAAM,CAACK,QAAP,CAAgBC,MAAhB,CAAuBR,KAAvB,EAA8B,CAA9B,EAAiC,GAAGD,IAAI,CAACQ,QAAzC;AACD,WAFD,MAEO;AACLL,YAAAA,MAAM,CAACK,QAAP,CAAgBC,MAAhB,CAAuBR,KAAvB,EAA8B,CAA9B;AACD;;AAED,iBAAOA,KAAP;AACD;;AAED,eAAOS,SAAP;AACD,OA1BI,CAAL;AA2BD,KA5BD;AA6BD;AACF","sourcesContent":["import {visit} from 'unist-util-visit'\n\n/**\n * @typedef {import('unist').Node} Node\n * @typedef {import('hast').Root} Root\n * @typedef {import('hast').Element} Element\n *\n * @callback AllowElement\n * @param {Element} element\n * @param {number} index\n * @param {Element|Root} parent\n * @returns {boolean|undefined}\n *\n * @typedef Options\n * @property {Array.<string>} [allowedElements]\n * @property {Array.<string>} [disallowedElements=[]]\n * @property {AllowElement} [allowElement]\n * @property {boolean} [unwrapDisallowed=false]\n */\n\n/**\n * @type {import('unified').Plugin<[Options], Root>}\n */\nexport default function rehypeFilter(options) {\n  if (options.allowedElements && options.disallowedElements) {\n    throw new TypeError(\n      'Only one of `allowedElements` and `disallowedElements` should be defined'\n    )\n  }\n\n  if (\n    options.allowedElements ||\n    options.disallowedElements ||\n    options.allowElement\n  ) {\n    return (tree) => {\n      visit(tree, 'element', (node, index, parent_) => {\n        const parent = /** @type {Element|Root} */ (parent_)\n        /** @type {boolean|undefined} */\n        let remove\n\n        if (options.allowedElements) {\n          remove = !options.allowedElements.includes(node.tagName)\n        } else if (options.disallowedElements) {\n          remove = options.disallowedElements.includes(node.tagName)\n        }\n\n        if (!remove && options.allowElement && typeof index === 'number') {\n          remove = !options.allowElement(node, index, parent)\n        }\n\n        if (remove && typeof index === 'number') {\n          if (options.unwrapDisallowed && node.children) {\n            parent.children.splice(index, 1, ...node.children)\n          } else {\n            parent.children.splice(index, 1)\n          }\n\n          return index\n        }\n\n        return undefined\n      })\n    }\n  }\n}\n"]},"metadata":{},"sourceType":"module"}